"use strict";class Ajax{callController(parameter,callBackFunction){$.ajax({url:"../app/controller/ajax.php",type:"POST",data:parameter,dataType:"json",success:function(callBackData){eval(callBackFunction+"(callBackData)")},error:function(a,typeError,textError){let error0='{"errMessage": "Se ha producido un error en la conexion", "errCodeException": "", "errMessageException": "" }',error1='{"errMessage": "Se ha producido un error en la conexion", "errCodeException":"'+typeError+'", "errMessageException":"'+textError+'"}';eval(callBackFunction+'({"succes": false, "errores": ['+error0+","+error1+"]})")}})}}class AltaArticulo{evalInputsRegistro(){let e=[];return e.succes=!0,e.errores=[],e.errores.nombre=!0,e.errores.descripcion=!0,e.errores.precio=!0,e.errores.descuento=!0,validateNombre($("#nombre").val())||(e.succes=!1,e.errores.nombre=!1),validateDescripcion($("#descripcion").val())||(e.succes=!1,e.errores.descripcion=!1),validatePrecio($("#precio").val())||(e.succes=!1,e.errores.precio=!1),validateDescuento($("#descuento").val())||(e.succes=!1,e.errores.descuento=!1),e}getParameterRegistro(){return"action=altaArticulo&"+$("#formAltaArticulo").serialize()}getTextErrorRegistro(e){let r="";return e.nombre||(r+="<strong>Formato de nombre incorrecto</strong><br>",r+="Solo admite letras<br>",r+="Ha de contener al menos 2 caracteres<br>"),e.descripcion||(r+="<strong>Formato de descripcion incorrecto</strong><br>",r+="Solo admite letras y espacios<br>",r+="Ha de comenzar por una letra<br>",r+="Ha de contener al menos 5 caracteres<br>"),e.precio||(r+="<strong>Formato de precio completo incorrecto</strong><br>",r+="Ha de contener numeros, admite decimales<br>",r+="Su valor minimo admisible es 0<br>"),e.descuento||(r+="<strong>Formato de descuento completo incorrecto</strong><br>",r+="Ha de contener numeros, admite decimales<br>",r+="Su valor minimo admisible es 0<br>",r+="Su valor maximo admisible es 1, equivale a 100%<br>"),r}}function evalRegistro(){let e=altaArticuloApp.evalInputsRegistro();e.succes?ajaxApp.callController(altaArticuloApp.getParameterRegistro(),"callBackEvalRegistro"):msjDanger("ALTA ARTICULO",altaArticuloApp.getTextErrorRegistro(e.errores))}function callBackEvalRegistro(e){e.success?msjSucces("ALTA ARTICULO","<strong>Se ha efectuado el alta correctamente</strong>"):msjDanger("ALTA ARTICULO",e.errores[0].errMessage)}var ajaxApp=new Ajax,altaArticuloApp=new AltaArticulo;function addEventsLogin(){$("#registrar").click(evalRegistro)}function validateNombre(e){return esTexto(e)&&e.length>=2}function validateDescripcion(e){return esTextoEspacio(e)&&e.length>=5&&esFormatoDescripcion(e)}function esFormatoDescripcion(e){return esLetra(e[0])}function validatePrecio(e){return esNumeroPositivoEntero(e)||"0"===e||esNumeroDecimal(e)&&e>0}function validateDescuento(e){return"0"===e||"1"===e||esNumeroDecimal(e)&&e>0&&e<=1}function esTexto(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esLetra(e[o])||(r=!1,o=e.length);else r=!1;return r}function esTextoNumero(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esLetra(e[o])||esNumeros(e[o])||(r=!1,o=e.length);else r=!1;return r}function esTextoEspacio(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esLetra(e[o])||esEspacio(e[o])||(r=!1,o=e.length);else r=!1;return r}function esNumeroMas(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esNumero(e[o])||esMas(e[o])||(r=!1,o=e.length);else r=!1;return r}function esNumeroGuion(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esNumero(e[o])||esGuion(e[o])||(r=!1,o=e.length);else r=!1;return r}function esNumeros(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esNumero(e[o])||(r=!1,o=e.length);else r=!1;return r}function esNumeroDecimal(e){let r=e.split(".");return 2===r.length&&("0"===r[0]||parseInt(r[0]))&&("0"===r[1]||parseInt(r[1]))}function esTextoEspacioPuntoComaBarraNumero(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esTexto(e[o])||esEspacio(e[o])||esPunto(e[o])||esComa(e[o])||esNumero(e[o])||esBarra(e[o])||(r=!1,o=e.length);else r=!1;return r}function esTextoPunto(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esTexto(e[o])||esPunto(e[o])||(r=!1,o=e.length);else r=!1;return r}function esTextoBarra(e){let r=!0;if(""!==e&&null!==e)for(let o=0;o<e.length;o++)esTexto(e[o])||esPunto(e[o])||(r=!1,o=e.length);else r=!1;return r}function esNumeroPositivoEntero(e){return parseInt(e)&&esPositivo(e)&&esEntero(e)}function esLetra(e){return e.charCodeAt()>64&&e.charCodeAt()<91||165===e.charCodeAt()||164===e.charCodeAt()||e.charCodeAt()>96&&e.charCodeAt()<123}function esEspacio(e){return 32===e.charCodeAt()}function esNumero(e){return e.charCodeAt()>47&&e.charCodeAt()<58}function esPositivo(e){return parseInt(e)>0}function esEntero(e){return parseInt(e)%1==0}function esGuion(e){return 45===e.charCodeAt()}function esPunto(e){return 46===e.charCodeAt()}function esComa(e){return 44===e.charCodeAt()}function esContBarra(e){return 47===e.charCodeAt()}function esBarra(e){return 92===e.charCodeAt()}function esMas(e){return 43===e.charCodeAt()}function msjDanger(e,r){$("#mensajes").append('<div class="modal fade bd-example-modal-lg" id="danger" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header modal-header-danger"><h1>'+e+'</h1></div><div class="modal-body">'+r+'</div><div class="modal-footer"><button type="button" class="btn btn-default pull-rigth" data-dismiss="modal">Cerrar</button></div></div></div></div>'),$("#danger").modal("show")}function msjWarning(e,r){$("#mensajes").append('<div class="modal fade bd-example-modal-lg" id="warning" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header modal-header-warning"><h1>'+e+'</h1></div><div class="modal-body">'+r+'</div><div class="modal-footer"><button type="button" class="btn btn-default pull-rigth" data-dismiss="modal">Cerrar</button></div></div></div></div>'),$("#warning").modal("show")}function msjSucces(e,r){$("#mensajes").append('<div class="modal fade bd-example-modal-lg" id="success" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header modal-header-success"><h1>'+e+'</h1></div><div class="modal-body">'+r+'</div><div class="modal-footer"><button type="button" class="btn btn-default pull-rigth" data-dismiss="modal">Cerrar</button></div></div></div></div>'),$("#success").modal("show")}function msjInfo(e,r){$("#mensajes").append('<div class="modal fade bd-example-modal-lg" id="info" tabindex="-1" role="dialog" aria-labelledby="myLargeModalLabel" aria-hidden="true"><div class="modal-dialog modal-lg"><div class="modal-content"><div class="modal-header modal-header-info"><h1>'+e+'</h1></div><div class="modal-body">'+r+'</div><div class="modal-footer"><button type="button" class="btn btn-default pull-rigth" data-dismiss="modal">Cerrar</button></div></div></div></div>'),$("#info").modal("show")}document.onload=addEventsLogin();